module.exports=[31790,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(40475),f=a.i(3130),g=a.i(40695),h=a.i(54161),i=a.i(46893),j=a.i(53071),k=a.i(56941),l=a.i(64600);let m={skin:"피부 보정",exposure:"노출 조정",trim:"트리밍",general:"일반"},n=(a=450)=>{let b=["ceremony","makeup","outdoor","family","couple"],c=[];for(let d=1;d<=a;d++){let a=b[Math.floor(Math.random()*b.length)];c.push({id:`photo-${d}`,url:`https://picsum.photos/seed/${d}/1200/800`,thumbnail:`https://picsum.photos/seed/${d}/400/300`,category:a,selected:!1,comments:[],tags:[]})}return c};n(450);let o=a=>({ceremony:"본식",makeup:"메이크업",outdoor:"야외",family:"가족",couple:"커플"})[a];var p=a.i(33441),q=a.i(33508),r=a.i(70106);let s=(0,r.default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);var t=a.i(69012);let u=(0,r.default)("grid-3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),v=(0,r.default)("layout-grid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]);var w=a.i(13749),x=a.i(50522);let y=(0,r.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var z=a.i(92e3),A=a.i(67453),B=a.i(92759),C=a.i(23292),D=a.i(97895);function E({params:a}){let{token:r}=(0,c.use)(a),E=(0,d.useRouter)(),F=(0,k.getClientDataByToken)(r),[G,H]=(0,c.useState)(n(450)),[I,J]=(0,c.useState)("all"),[K,L]=(0,c.useState)("medium"),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(0),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)("general"),Y=F?.steps.proof.maxSelections||50,Z=G.filter(a=>a.selected).length,$=Z<Y,_=Math.round(Z/Y*100),aa=(0,c.useMemo)(()=>"all"===I?G:G.filter(a=>a.category===I),[G,I]);if(!F)return E.push(`/c/${r}/invalid`),null;let ab=F.steps.proof.deadline,ac=ab?(0,k.getDaysUntilDeadline)(ab):null,ad=!!ab&&(0,k.isDeadlineNear)(ab),ae=!!ab&&(0,k.isDeadlineOverdue)(ab),af=a=>{H(b=>b.map(b=>b.id===a?b.selected||$?{...b,selected:!b.selected}:(C.toast.error(`최대 ${Y}장까지만 선택할 수 있습니다`),b):b))},ag=()=>{N(!1)},ah=a=>{T(a),R(!0),V(""),X("general")},ai=async()=>{let a=G.filter(a=>a.selected);0===a.length?C.toast.error("최소 1장 이상 선택해주세요"):(console.log("Selected photos:",a.length),await new Promise(a=>setTimeout(a,1500)),C.toast.success(`${a.length}장의 사진이 선택되었습니다!`),setTimeout(()=>{E.push(l.ROUTES.CLIENT_DOWNLOAD(r))},1e3))},aj=aa[O];return(0,b.jsxs)(e.ClientPortalLayout,{token:r,children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"프루프 갤러리"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["원하시는 사진을 선택해주세요 (최대 ",Y,"장)"]})]}),ab&&(ad||ae)&&(0,b.jsx)(f.Card,{className:(0,D.cn)("border-2",ae?"border-red-500 bg-red-50":"border-orange-500 bg-orange-50"),children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(z.AlertCircle,{className:(0,D.cn)("h-5 w-5 mt-0.5 flex-shrink-0",ae?"text-red-600":"text-orange-600")}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:(0,D.cn)("font-semibold mb-1",ae?"text-red-900":"text-orange-900"),children:ae?"선택 마감이 지났습니다!":"선택 마감이 임박했습니다!"}),(0,b.jsx)("p",{className:(0,D.cn)("text-sm",ae?"text-red-700":"text-orange-700"),children:ae?`${Math.abs(ac)}일 초과: 빠른 시일 내에 선택을 완료해주세요.`:0===ac?"오늘이 마감일입니다. 지금 바로 선택을 완료해주세요!":`D-${ac}: 서둘러 사진을 선택해주세요.`})]})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"선택한 사진"}),(0,b.jsxs)("p",{className:"text-2xl font-bold",children:[Z," / ",Y]})]}),(0,b.jsxs)(h.Badge,{variant:Z>=Y?"default":"secondary",className:"text-lg px-3 py-1",children:[_,"%"]})]}),(0,b.jsx)("div",{className:"h-3 bg-gray-200 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:(0,D.cn)("h-full transition-all duration-300",Z>=Y?"bg-green-500":"bg-blue-500"),style:{width:`${_}%`}})}),Z>=Y&&(0,b.jsxs)("p",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,b.jsx)(A.CheckCircle2,{className:"h-4 w-4"}),"모든 사진을 선택했습니다! 선택을 변경하거나 제출할 수 있습니다."]})]})})}),(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)(t.Filter,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)(g.Button,{variant:"all"===I?"default":"outline",size:"sm",onClick:()=>J("all"),children:["전체 (",G.length,")"]}),["ceremony","makeup","outdoor","family","couple"].map(a=>(0,b.jsxs)(g.Button,{variant:I===a?"default":"outline",size:"sm",onClick:()=>J(a),children:[o(a)," (",G.filter(b=>b.category===a).length,")"]},a))]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{variant:"small"===K?"default":"outline",size:"sm",onClick:()=>L("small"),children:(0,b.jsx)(u,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"medium"===K?"default":"outline",size:"sm",onClick:()=>L("medium"),children:(0,b.jsx)(v,{className:"h-4 w-4"})}),(0,b.jsx)(g.Button,{variant:"large"===K?"default":"outline",size:"sm",onClick:()=>L("large"),children:(0,b.jsx)(v,{className:"h-3 w-3"})})]})]})})}),(0,b.jsx)("div",{className:(0,D.cn)("grid gap-4",{small:"grid-cols-4 md:grid-cols-6 lg:grid-cols-8",medium:"grid-cols-3 md:grid-cols-4 lg:grid-cols-6",large:"grid-cols-2 md:grid-cols-3 lg:grid-cols-4"}[K]),children:aa.map((a,c)=>(0,b.jsxs)("div",{className:"relative group aspect-[4/3] overflow-hidden rounded-lg border-2 transition-all cursor-pointer hover:shadow-lg",style:{borderColor:a.selected?"#3b82f6":"transparent"},children:[(0,b.jsx)("img",{src:a.thumbnail,alt:`Photo ${a.id}`,className:"w-full h-full object-cover",onClick:()=>{P(c),N(!0)}}),(0,b.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all",children:[(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),af(a.id)},className:(0,D.cn)("absolute top-2 right-2 w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all",a.selected?"bg-blue-500 border-blue-500":"bg-white border-gray-300 opacity-0 group-hover:opacity-100"),children:a.selected&&(0,b.jsx)(p.Check,{className:"h-5 w-5 text-white"})}),(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),ah(a)},className:"absolute top-2 left-2 w-8 h-8 rounded-full bg-white border-2 border-gray-300 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all",children:[(0,b.jsx)(s,{className:"h-4 w-4"}),a.comments.length>0&&(0,b.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:a.comments.length})]}),(0,b.jsx)("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-all",children:(0,b.jsx)(y,{className:"h-5 w-5 text-white drop-shadow-lg"})}),(0,b.jsx)("div",{className:"absolute bottom-2 left-2",children:(0,b.jsx)(h.Badge,{className:(0,D.cn)("text-xs",{ceremony:"bg-blue-100 text-blue-800",makeup:"bg-pink-100 text-pink-800",outdoor:"bg-green-100 text-green-800",family:"bg-purple-100 text-purple-800",couple:"bg-red-100 text-red-800"}[a.category]),children:o(a.category)})})]})]},a.id))}),(0,b.jsx)(f.Card,{children:(0,b.jsxs)(f.CardContent,{className:"pt-6",children:[(0,b.jsxs)(g.Button,{onClick:ai,disabled:0===Z,className:"w-full h-12 text-lg",size:"lg",children:["선택 완료 (",Z,"장)"]}),0===Z&&(0,b.jsx)("p",{className:"text-xs text-center text-muted-foreground mt-3",children:"최소 1장 이상 선택해주세요"})]})})]}),M&&aj&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-95 flex items-center justify-center",children:[(0,b.jsx)("button",{onClick:ag,className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 flex items-center justify-center transition-all z-10",children:(0,b.jsx)(q.X,{className:"h-6 w-6 text-white"})}),(0,b.jsx)("button",{onClick:()=>{P(a=>a>0?a-1:aa.length-1)},className:"absolute left-4 w-12 h-12 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 flex items-center justify-center transition-all",children:(0,b.jsx)(w.ChevronLeft,{className:"h-8 w-8 text-white"})}),(0,b.jsx)("button",{onClick:()=>{P(a=>a<aa.length-1?a+1:0)},className:"absolute right-4 w-12 h-12 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 flex items-center justify-center transition-all",children:(0,b.jsx)(x.ChevronRight,{className:"h-8 w-8 text-white"})}),(0,b.jsxs)("div",{className:"max-w-6xl max-h-[90vh] px-16",children:[(0,b.jsx)("img",{src:aj.url,alt:aj.id,className:"max-w-full max-h-[90vh] object-contain"}),(0,b.jsxs)("div",{className:"mt-4 text-center space-y-2",children:[(0,b.jsxs)("p",{className:"text-white text-sm",children:[O+1," / ",aa.length]}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsxs)(g.Button,{variant:aj.selected?"default":"secondary",onClick:()=>af(aj.id),children:[aj.selected?(0,b.jsx)(p.Check,{className:"mr-2 h-4 w-4"}):null,aj.selected?"선택됨":"선택하기"]}),(0,b.jsxs)(g.Button,{variant:"secondary",onClick:()=>{ah(aj),ag()},children:[(0,b.jsx)(s,{className:"mr-2 h-4 w-4"}),"코멘트 (",aj.comments.length,")"]})]})]})]})]}),(0,b.jsx)(j.Sheet,{open:Q,onOpenChange:R,children:(0,b.jsxs)(j.SheetContent,{className:"w-full sm:max-w-lg overflow-y-auto",children:[(0,b.jsxs)(j.SheetHeader,{children:[(0,b.jsx)(j.SheetTitle,{children:"사진 코멘트"}),(0,b.jsx)(j.SheetDescription,{children:"보정이 필요한 부분이나 요청사항을 남겨주세요"})]}),S&&(0,b.jsxs)("div",{className:"mt-6 space-y-6",children:[(0,b.jsx)("div",{className:"rounded-lg overflow-hidden border",children:(0,b.jsx)("img",{src:S.thumbnail,alt:S.id,className:"w-full"})}),S.comments.length>0&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("h3",{className:"font-semibold",children:["코멘트 (",S.comments.length,")"]}),S.comments.map(a=>(0,b.jsxs)("div",{className:"rounded-lg border p-3 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Badge,{variant:"secondary",className:"text-xs",children:m[a.type]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleString("ko-KR")})]}),(0,b.jsx)("p",{className:"text-sm",children:a.text})]},a.id))]}),(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"새 코멘트 추가"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"코멘트 유형"}),(0,b.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["skin","exposure","trim","general"].map(a=>(0,b.jsx)("button",{onClick:()=>X(a),className:(0,D.cn)("p-2 rounded-lg border-2 text-sm font-medium transition-all",W===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:bg-gray-50"),children:m[a]},a))})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"코멘트 내용"}),(0,b.jsx)(i.Textarea,{value:U,onChange:a=>V(a.target.value),placeholder:"요청사항을 입력해주세요...",rows:4})]}),(0,b.jsxs)(g.Button,{onClick:()=>{if(!S||!U.trim())return;let a={id:`comment-${Date.now()}`,type:W,text:U.trim(),createdAt:new Date().toISOString()};H(b=>b.map(b=>b.id===S.id?{...b,comments:[...b.comments,a]}:b)),V(""),C.toast.success("코멘트가 추가되었습니다")},disabled:!U.trim(),className:"w-full",children:[(0,b.jsx)(B.Send,{className:"mr-2 h-4 w-4"}),"코멘트 추가"]})]})]})]})})]})}a.s(["default",()=>E],31790)}];

//# sourceMappingURL=app_%28client%29_c_%5Btoken%5D_proof-gallery_page_tsx_df0ebd88._.js.map