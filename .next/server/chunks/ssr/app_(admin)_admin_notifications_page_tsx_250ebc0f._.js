module.exports=[34721,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(48645),f=a.i(3130),g=a.i(54161),h=a.i(40695),i=a.i(24965),j=a.i(51718),k=a.i(32928),l=a.i(64600),m=a.i(23312);let n=(0,a.i(70106).default)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]);var o=a.i(65151),p=a.i(20610),q=a.i(69012),r=a.i(46842),s=a.i(38632),t=a.i(83497),u=a.i(32860),v=a.i(73570);a.i(3255);var w=a.i(50188),x=a.i(42724),y=a.i(44513),z=a.i(52587),A=a.i(23464),B=a.i(57270),C=a.i(74016);function D(a,b){let c=(0,C.toDate)(a)-(0,C.toDate)(b);return c<0?-1:c>0?1:c}var E=a.i(59296),F=a.i(61042),G=a.i(2491);function H(){let a=(0,d.useRouter)(),H=(0,d.usePathname)(),I=(0,d.useSearchParams)(),[J,K]=(0,c.useState)(!0),[L,M]=(0,c.useState)([]),[N,O]=(0,c.useState)(new Set),P=I.get("type")||"all",Q=I.get("read")||"all";(0,c.useEffect)(()=>{setTimeout(()=>{M((0,k.filterNotifications)(k.mockNotifications,P,Q)),K(!1)},600)},[P,Q]);let R=(b,c)=>{let d=new URLSearchParams(I.toString());"all"===c?d.delete(b):d.set(b,c),a.push(`${H}?${d.toString()}`)},S=a=>{O(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},T=a=>({assign:"bg-blue-100 text-blue-700",deadline:"bg-orange-100 text-orange-700",delivery:"bg-green-100 text-green-700",proof:"bg-purple-100 text-purple-700",urgent:"bg-red-100 text-red-700"})[a]||"bg-gray-100 text-gray-700",U=a=>{switch(a.relatedEntityType){case"schedule":if("assignment"===a.type)return`${l.ROUTES.ADMIN_CALENDAR}?photographer=unassigned`;return`${l.ROUTES.ADMIN_CALENDAR}?schedule=${a.relatedEntityId}`;case"project":if("deadline"===a.type)return`${l.ROUTES.ADMIN_PROJECTS}?sort=deadline`;if("delivery"===a.type)return l.ROUTES.ADMIN_DELIVERY;return`${l.ROUTES.ADMIN_PROJECTS}?id=${a.relatedEntityId}`;case"proof":return`${l.ROUTES.ADMIN_PROJECTS}?status=proof_pending`;case"customer":return`${l.ROUTES.ADMIN_CUSTOMERS}?id=${a.relatedEntityId}`;default:return l.ROUTES.ADMIN_DASHBOARD}},V=L.filter(a=>!a.isRead).length;return(0,b.jsx)(e.AdminLayout,{align:"left",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"알림함"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:V>0?`${V}개의 읽지 않은 알림`:"모든 알림을 확인했습니다"})]}),(0,b.jsx)("div",{className:"flex gap-2",children:N.size>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>O(new Set),children:"선택 해제"}),(0,b.jsxs)(h.Button,{size:"sm",onClick:()=>{M(a=>a.map(a=>N.has(a.id)?{...a,isRead:!0}:a)),O(new Set)},children:[(0,b.jsx)(p.CheckCheck,{className:"mr-2 h-4 w-4"}),"선택 항목 읽음 처리 (",N.size,")"]})]}):(0,b.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>{M(a=>a.map(a=>({...a,isRead:!0}))),O(new Set)},disabled:0===V,children:[(0,b.jsx)(p.CheckCheck,{className:"mr-2 h-4 w-4"}),"모두 읽음 처리"]})})]}),(0,b.jsxs)(f.Card,{children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsxs)(f.CardTitle,{className:"text-base flex items-center gap-2",children:[(0,b.jsx)(q.Filter,{className:"h-4 w-4"}),"필터"]})}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"알림 유형"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(h.Button,{variant:"all"===P?"default":"outline",size:"sm",onClick:()=>R("type","all"),children:"전체"}),(0,b.jsxs)(h.Button,{variant:"assign"===P?"default":"outline",size:"sm",onClick:()=>R("type","assign"),children:[(0,b.jsx)(r.User,{className:"mr-1 h-3 w-3"}),"배정"]}),(0,b.jsxs)(h.Button,{variant:"deadline"===P?"default":"outline",size:"sm",onClick:()=>R("type","deadline"),children:[(0,b.jsx)(v.AlertTriangle,{className:"mr-1 h-3 w-3"}),"마감"]}),(0,b.jsxs)(h.Button,{variant:"delivery"===P?"default":"outline",size:"sm",onClick:()=>R("type","delivery"),children:[(0,b.jsx)(t.Package,{className:"mr-1 h-3 w-3"}),"배송"]}),(0,b.jsxs)(h.Button,{variant:"proof"===P?"default":"outline",size:"sm",onClick:()=>R("type","proof"),children:[(0,b.jsx)(s.Image,{className:"mr-1 h-3 w-3"}),"프루프"]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"읽음 상태"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(h.Button,{variant:"all"===Q?"default":"outline",size:"sm",onClick:()=>R("read","all"),children:"전체"}),(0,b.jsxs)(h.Button,{variant:"unread"===Q?"default":"outline",size:"sm",onClick:()=>R("read","unread"),children:[(0,b.jsx)(m.Bell,{className:"mr-1 h-3 w-3"}),"읽지 않음"]}),(0,b.jsxs)(h.Button,{variant:"read"===Q?"default":"outline",size:"sm",onClick:()=>R("read","read"),children:[(0,b.jsx)(n,{className:"mr-1 h-3 w-3"}),"읽음"]})]})]})]})})]}),L.length>0&&(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>{N.size===L.length?O(new Set):O(new Set(L.map(a=>a.id)))},children:N.size===L.length?"전체 해제":"전체 선택"}),N.size>0&&(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[N.size,"개 선택됨"]})]}),J?(0,b.jsx)(j.NotificationListSkeleton,{}):0===L.length?(0,b.jsx)(f.Card,{children:(0,b.jsx)(f.CardContent,{className:"pt-6",children:(0,b.jsx)(i.EmptyState,{icon:m.Bell,title:"알림이 없습니다",description:"all"!==P||"all"!==Q?"선택한 필터에 해당하는 알림이 없습니다.":"새로운 알림이 도착하면 여기에 표시됩니다.",action:"all"!==P||"all"!==Q?{label:"필터 초기화",onClick:()=>a.push(H)}:void 0})})}):(0,b.jsx)("div",{className:"space-y-2",children:L.map((c,d)=>{var e,f,h,i,j;let k,l=(e=c.type,({assign:r.User,deadline:v.AlertTriangle,delivery:t.Package,proof:s.Image,urgent:m.Bell})[e]||m.Bell),p=N.has(c.id),q=(f=c.priority,(k={urgent:{label:"긴급",className:"bg-red-500 text-white"},high:{label:"높음",className:"bg-orange-500 text-white"},normal:{label:"보통",className:"bg-blue-500 text-white"},low:{label:"낮음",className:"bg-gray-400 text-white"}})[f]||k.normal);return(0,b.jsxs)("div",{className:(0,w.cn)("flex items-start gap-3 p-4 border rounded-lg transition-all cursor-pointer",!c.isRead&&"bg-blue-50 border-blue-200",p&&"ring-2 ring-zinc-900","hover:shadow-md focus-within:ring-2 focus-within:ring-zinc-900"),tabIndex:0,role:"article","aria-label":`알림: ${c.title}`,onClick:()=>{a.push(U(c))},onKeyDown:b=>{"Enter"===b.key?a.push(U(c)):" "===b.key&&(b.preventDefault(),S(c.id))},children:[(0,b.jsx)("input",{type:"checkbox",checked:p,onChange:()=>S(c.id),className:"mt-1 h-4 w-4 rounded border-gray-300 flex-shrink-0 cursor-pointer","aria-label":`${c.title} 선택`}),(0,b.jsx)("div",{className:(0,w.cn)("flex h-10 w-10 items-center justify-center rounded-full flex-shrink-0",T(c.type)),children:(0,b.jsx)(l,{className:"h-5 w-5"})}),(0,b.jsxs)("div",{className:"flex-1 space-y-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2 flex-wrap",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("h3",{className:(0,w.cn)("font-semibold text-sm",!c.isRead&&"text-zinc-900"),children:c.title}),(0,b.jsx)(g.Badge,{className:(0,w.cn)("text-xs",T(c.type)),children:{assign:"배정",deadline:"마감",delivery:"배송",proof:"프루프",urgent:"긴급"}[h=c.type]||h}),("urgent"===c.priority||"high"===c.priority)&&(0,b.jsx)(g.Badge,{className:(0,w.cn)("text-xs",q.className),children:q.label})]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:(i=new Date(c.createdAt),j={addSuffix:!0,locale:G.ko},function(a,b,c){var d;let e,f=(0,z.getDefaultOptions)(),g=c?.locale??f.locale??y.defaultLocale,h=D(a,b);if(isNaN(h))throw RangeError("Invalid time value");let i=Object.assign({},c,{addSuffix:c?.addSuffix,comparison:h}),[j,k]=(0,B.normalizeDates)(c?.in,...h>0?[b,a]:[a,b]),l=(d=void 0,a=>{let b=(d?Math[d]:Math.trunc)(a);return 0===b?0:b})(((0,C.toDate)(k)-(0,C.toDate)(j))/1e3),m=Math.round((l-((0,A.getTimezoneOffsetInMilliseconds)(k)-(0,A.getTimezoneOffsetInMilliseconds)(j))/1e3)/60);if(m<2)if(c?.includeSeconds)if(l<5)return g.formatDistance("lessThanXSeconds",5,i);else if(l<10)return g.formatDistance("lessThanXSeconds",10,i);else if(l<20)return g.formatDistance("lessThanXSeconds",20,i);else if(l<40)return g.formatDistance("halfAMinute",0,i);else if(l<60)return g.formatDistance("lessThanXMinutes",1,i);else return g.formatDistance("xMinutes",1,i);else if(0===m)return g.formatDistance("lessThanXMinutes",1,i);else return g.formatDistance("xMinutes",m,i);if(m<45)return g.formatDistance("xMinutes",m,i);if(m<90)return g.formatDistance("aboutXHours",1,i);if(m<E.minutesInDay){let a=Math.round(m/60);return g.formatDistance("aboutXHours",a,i)}if(m<2520)return g.formatDistance("xDays",1,i);else if(m<E.minutesInMonth){let a=Math.round(m/E.minutesInDay);return g.formatDistance("xDays",a,i)}else if(m<2*E.minutesInMonth)return e=Math.round(m/E.minutesInMonth),g.formatDistance("aboutXMonths",e,i);if((e=function(a,b,c){var d;let e,f,g,[h,i,j]=(0,B.normalizeDates)(void 0,a,a,b),k=D(i,j),l=Math.abs(function(a,b,c){let[d,e]=(0,B.normalizeDates)(void 0,a,b);return 12*(d.getFullYear()-e.getFullYear())+(d.getMonth()-e.getMonth())}(i,j));if(l<1)return 0;1===i.getMonth()&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-k*l);let m=D(i,j)===-k;e=(0,C.toDate)(h,void 0),+(0,F.endOfDay)(e,void 0)==+(d=void 0,g=(f=(0,C.toDate)(e,d?.in)).getMonth(),f.setFullYear(f.getFullYear(),g+1,0),f.setHours(23,59,59,999),f)&&1===l&&1===D(h,j)&&(m=!1);let n=k*(l-m);return 0===n?0:n}(k,j))<12){let a=Math.round(m/E.minutesInMonth);return g.formatDistance("xMonths",a,i)}{let a=e%12,b=Math.trunc(e/12);return a<3?g.formatDistance("aboutXYears",b,i):a<9?g.formatDistance("overXYears",b,i):g.formatDistance("almostXYears",b+1,i)}}(i,(0,x.constructFrom)(i,Date.now()),j))})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:c.message}),(0,b.jsx)("div",{className:"flex items-center gap-3 pt-1",children:(0,b.jsxs)("button",{onClick:b=>{b.stopPropagation(),a.push(U(c))},className:"text-xs text-blue-600 hover:text-blue-700 font-medium inline-flex items-center gap-1 hover:underline",children:[c.relatedEntityName," 보기",(0,b.jsx)(u.ArrowRight,{className:"h-3 w-3"})]})})]}),(0,b.jsx)("button",{onClick:a=>{var b;a.stopPropagation(),b=c.id,M(a=>a.map(a=>a.id===b?{...a,isRead:!a.isRead}:a))},className:"flex-shrink-0 p-2 hover:bg-zinc-100 rounded transition-colors","aria-label":c.isRead?"읽지 않음으로 표시":"읽음으로 표시",children:c.isRead?(0,b.jsx)(n,{className:"h-4 w-4 text-muted-foreground"}):(0,b.jsx)(o.Circle,{className:"h-4 w-4 text-blue-600 fill-blue-600"})})]},c.id)})})]})})}function I(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)(e.AdminLayout,{children:(0,b.jsx)(j.NotificationListSkeleton,{})}),children:(0,b.jsx)(H,{})})}a.s(["default",()=>I],34721)}];

//# sourceMappingURL=app_%28admin%29_admin_notifications_page_tsx_250ebc0f._.js.map